    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Notes - Comprehensive Guide with Real DevOps Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f8f9fa;
            color: #2c3e50;
            line-height: 1.6;
        }

        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e0e0e0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        nav .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-btn {
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }

        .back-btn:hover {
            color: #2980b9;
        }

        .hero {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 120px 20px 80px;
            text-align: center;
            margin-top: 60px;
        }

        .hero h1 {
            font-size: 3em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2em;
            opacity: 0.95;
            max-width: 900px;
            margin: 0 auto;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e0e0e0;
        }

        h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
        }

        h3 {
            color: #3498db;
            font-size: 1.4em;
            margin: 30px 0 15px 0;
        }

        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        code {
            font-family: 'Fira Code', monospace;
            background: #e8f4fd;
            color: #2980b9;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        ul, ol {
            margin-left: 25px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 10px;
            line-height: 1.8;
        }

        .info-box {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border: 1px solid #e0e0e0;
        }

        th {
            background: #3498db;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .step-number {
            display: inline-block;
            background: #3498db;
            color: white;
            width: 35px;
            height: 35px;
            line-height: 35px;
            text-align: center;
            border-radius: 50%;
            font-weight: 600;
            margin-right: 10px;
        }

        .toc {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 40px;
        }

        .toc h3 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            margin: 0;
        }

        .toc li {
            margin-bottom: 8px;
        }

        .toc a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
        }

        .highlight-box h3 {
            color: white;
            margin-top: 0;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2em;
            }

            .hero p {
                font-size: 1em;
            }

            .section {
                padding: 25px;
            }

            h2 {
                font-size: 1.6em;
            }

            pre {
                font-size: 0.8em;
                padding: 15px;
            }

            table {
                font-size: 0.9em;
            }

            th, td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <a href="/index.html" class="back-btn">‚Üê Back to Portfolio</a>
            <span style="color: #3498db; font-weight: 600;">üê≥ Docker Guide</span>
        </div>
    </nav>

    <div class="hero">
        <h1>üê≥ Docker Notes</h1>
        <p>Comprehensive Guide with Real DevOps Experience - From Local Development to Production CI/CD</p>
    </div>

    <div class="container">
        <div class="toc">
            <h3>üìë Table of Contents</h3>
            <ul>
                <li><a href="#section0">0. Real-World Experience Behind This Document</a></li>
                <li><a href="#section1">1. Introduction to Docker</a></li>
                <li><a href="#section2">2. Installing Docker (Local + Cloud)</a></li>
                <li><a href="#section3">3. Docker Images</a></li>
                <li><a href="#section4">4. Docker Containers</a></li>
                <li><a href="#section5">5. Dockerfile Essentials</a></li>
                <li><a href="#section6">6. Multi-Stage Build</a></li>
                <li><a href="#section7">7. Docker Networking</a></li>
                <li><a href="#section8">8. Volumes (Persistent Data)</a></li>
                <li><a href="#section9">9. Docker Compose</a></li>
                <li><a href="#section10">10. Docker in CI/CD</a></li>
                <li><a href="#section11">11. Container Registries</a></li>
                <li><a href="#section12">12. Security Best Practices</a></li>
                <li><a href="#section13">13. Troubleshooting</a></li>
                <li><a href="#section14">14. VM ‚Üí Docker ‚Üí Cloud Journey</a></li>
                <li><a href="#section15">15. Enterprise Comparison</a></li>
            </ul>
        </div>

        <div class="section" id="section0">
            <h2><span class="step-number">0</span>Real-World Experience Behind This Document</h2>
            <p>The content in this Docker guide incorporates practical knowledge based on the following hands-on experience:</p>

            <div class="highlight-box">
                <h3>üöÄ Practical Experience Highlights</h3>
                <ul>
                    <li><strong>Deploying real applications using Docker Desktop</strong> - Running multiple containers including n8n, Jellyfin, Ollama LLM server, PostgreSQL, Cloudflare Tunnel, and custom web apps</li>
                    <li><strong>Using Jenkins ‚Üí Docker-based CI/CD pipelines</strong> - Automated Docker image builds, tagging, version control using build numbers, ECR pushes, and container-based deployments</li>
                    <li><strong>Managing multi-service setups</strong> - Reverse-proxy routing, persistent volumes, network isolation, and orchestration using Docker Compose</li>
                    <li><strong>Building real CI/CD workflows</strong> - GitHub ‚Üí Jenkins ‚Üí Docker ‚Üí Deploy pipelines with rollback strategies, blue-green concepts, and container version pinning</li>
                    <li><strong>Transition from VM-based hosting ‚Üí Cloud ‚Üí DevOps automation</strong> - Migrating workloads from local VMs to AWS EC2, ECR, and cloud-native infrastructure</li>
                </ul>
            </div>

            <div class="info-box">
                <strong>üí° Note:</strong> This experience is woven throughout the guide to keep the content practical and production-focused.
            </div>
        </div>

        <div class="section" id="section1">
            <h2><span class="step-number">1</span>Introduction to Docker</h2>
            <p>Docker is a containerization engine used to run applications in isolated, reproducible environments. It is heavily used in DevOps, cloud, local development, and CI/CD workflows like Jenkins pipelines.</p>

            <h3>Why Docker Matters for Real Projects</h3>
            <ul>
                <li><strong>Consistency:</strong> Identical environments from local Docker Desktop ‚Üí cloud EC2</li>
                <li><strong>Multi-Service Apps:</strong> Ideal for n8n, Ollama, Jellyfin, databases running together</li>
                <li><strong>CI/CD Friendly:</strong> Jenkins builds ‚Üí Docker images ‚Üí automated deploy</li>
                <li><strong>Fast Rollback:</strong> Using image tags for instant version switching</li>
                <li><strong>Isolation:</strong> No dependency conflicts on host machines</li>
            </ul>

            <div class="success-box">
                <strong>‚úì Real-World Use Case:</strong> Running multiple services (n8n automation, Jellyfin media server, Ollama AI models) on a single machine without conflicts.
            </div>
        </div>

        <div class="section" id="section2">
            <h2><span class="step-number">2</span>Installing Docker (Local + Cloud)</h2>

            <h3>Docker Desktop (Local Setup)</h3>
            <p>Used for running n8n, Ollama, Jellyfin, Cloudflare Tunnel, and multi-container stacks.</p>
            <ul>
                <li><strong>Windows/Mac:</strong> Download from <a href="https://www.docker.com/products/docker-desktop" target="_blank">docker.com</a></li>
                <li>Includes Docker Engine, Docker Compose, and GUI management</li>
                <li>Perfect for local development and testing</li>
            </ul>

            <h3>Linux Installation (Cloud or VM)</h3>
            <pre>sudo apt update
sudo apt install docker.io -y
sudo systemctl enable docker
sudo systemctl start docker

# Add user to docker group
sudo usermod -aG docker $USER

# Verify installation
docker --version
docker ps</pre>

            <h3>Amazon Linux 2023 (AWS EC2)</h3>
            <pre>sudo dnf update -y
sudo dnf install docker -y
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker ec2-user</pre>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Important:</strong> After adding user to docker group, logout and login again for changes to take effect.
            </div>
        </div>

        <div class="section" id="section3">
            <h2><span class="step-number">3</span>Docker Images</h2>
            <p>Docker images are read-only templates used to create containers. They contain the application code, runtime, libraries, and dependencies.</p>

            <h3>Basic Image Commands</h3>
            <pre># Pull an image from Docker Hub
docker pull nginx

# Build an image from Dockerfile
docker build -t myapp:1.0 .

# Tag an image
docker tag myapp:1.0 myapp:prod

# Push to registry
docker push repo/myapp:prod

# List local images
docker images

# Remove an image
docker rmi myapp:1.0</pre>

            <div class="info-box">
                <strong>üí° CI/CD Pattern:</strong> This reflects real workflows where Jenkins builds images ‚Üí tags with build number ‚Üí pushes to registry ‚Üí deploys.
                <pre>docker build -t myapp:${BUILD_NUMBER} .
docker tag myapp:${BUILD_NUMBER} ecr/myapp:${BUILD_NUMBER}
docker push ecr/myapp:${BUILD_NUMBER}</pre>
            </div>
        </div>

        <div class="section" id="section4">
            <h2><span class="step-number">4</span>Docker Containers</h2>
            <p>Containers are running instances of Docker images. They are lightweight, portable, and isolated.</p>

            <h3>Container Lifecycle Commands</h3>
            <pre># Run a container
docker run -d -p 8080:80 --name webserver nginx

# List running containers
docker ps

# List all containers (including stopped)
docker ps -a

# Stop a container
docker stop webserver

# Start a stopped container
docker start webserver

# Restart a container
docker restart webserver

# Remove a container
docker rm webserver

# Remove a running container (force)
docker rm -f webserver</pre>

            <h3>Inspecting Containers</h3>
            <pre># View container logs
docker logs webserver
docker logs -f webserver  # Follow logs

# Execute command in running container
docker exec -it webserver bash

# Inspect container details
docker inspect webserver

# View container resource usage
docker stats webserver</pre>

            <div class="success-box">
                <strong>‚úì Real Usage:</strong> This pattern is used to run services like n8n, Jellyfin, Ollama, and local web apps.
            </div>
        </div>

        <div class="section" id="section5">
            <h2><span class="step-number">5</span>Dockerfile Essentials</h2>
            <p>A Dockerfile is a text file containing instructions to build a Docker image.</p>

            <h3>Basic Dockerfile Example</h3>
            <pre>FROM nginx:alpine
COPY index.html /usr/share/nginx/html/index.html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]</pre>

            <h3>Common Dockerfile Instructions</h3>
            <table>
                <tr>
                    <th>Instruction</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>FROM</code></td>
                    <td>Base image to build upon</td>
                </tr>
                <tr>
                    <td><code>WORKDIR</code></td>
                    <td>Set working directory</td>
                </tr>
                <tr>
                    <td><code>COPY</code></td>
                    <td>Copy files from host to container</td>
                </tr>
                <tr>
                    <td><code>RUN</code></td>
                    <td>Execute commands during build</td>
                </tr>
                <tr>
                    <td><code>EXPOSE</code></td>
                    <td>Document port container listens on</td>
                </tr>
                <tr>
                    <td><code>ENV</code></td>
                    <td>Set environment variables</td>
                </tr>
                <tr>
                    <td><code>CMD</code></td>
                    <td>Default command to run</td>
                </tr>
            </table>

            <h3>Best Practices Based on Real Deployments</h3>
            <ul>
                <li>‚úì Always use lightweight images (like Alpine) to reduce size</li>
                <li>‚úì Use multi-stage builds to create optimized production images</li>
                <li>‚úì Do not store secrets inside images - use environment variables</li>
                <li>‚úì Avoid running containers as root user</li>
                <li>‚úì Use <code>.dockerignore</code> to exclude unnecessary files</li>
                <li>‚úì Pin specific versions instead of using <code>latest</code> tag</li>
            </ul>
        </div>

        <div class="section" id="section6">
            <h2><span class="step-number">6</span>Multi-Stage Build (Production Pipelines)</h2>
            <p>Multi-stage builds allow you to create smaller, optimized production images by separating the build and runtime environments.</p>

            <h3>React/Node.js Example</h3>
            <pre>FROM node:18 AS build
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]</pre>

            <div class="success-box">
                <strong>‚úì Production Use:</strong> This is the exact approach used when deploying optimized frontend builds via Docker. Build stage installs dependencies and compiles code, then only the compiled output is copied to the final lightweight nginx image.
            </div>

            <h3>Benefits of Multi-Stage Builds</h3>
            <ul>
                <li>Smaller final image size (no build dependencies)</li>
                <li>Faster deployment and reduced bandwidth</li>
                <li>More secure (fewer attack surfaces)</li>
                <li>Cleaner production images</li>
            </ul>
        </div>

        <div class="section" id="section7">
            <h2><span class="step-number">7</span>Docker Networking</h2>
            <p>Docker networking enables containers to communicate with each other and the outside world.</p>

            <h3>Network Types</h3>
            <table>
                <tr>
                    <th>Network Type</th>
                    <th>Use Case</th>
                </tr>
                <tr>
                    <td><code>bridge</code></td>
                    <td>Default network, containers on same host</td>
                </tr>
                <tr>
                    <td><code>host</code></td>
                    <td>Container uses host's network directly</td>
                </tr>
                <tr>
                    <td><code>none</code></td>
                    <td>No network access</td>
                </tr>
                <tr>
                    <td><code>custom</code></td>
                    <td>User-defined networks for isolation</td>
                </tr>
            </table>

            <h3>Network Commands</h3>
            <pre># Create custom network
docker network create app-net

# Run container on custom network
docker run --network app-net --name app1 myapp

# Connect running container to network
docker network connect app-net app2

# Inspect network
docker network inspect app-net

# List networks
docker network ls</pre>

            <h3>Real-World Setup Example</h3>
            <div class="info-box">
                <strong>üí° My Multi-Service Setup:</strong>
                <ul>
                    <li>Ollama + n8n communication inside same network</li>
                    <li>Jellyfin + Media folders on shared network</li>
                    <li>Cloudflare Tunnel mapping to local Docker services</li>
                    <li>PostgreSQL accessible only to specific containers</li>
                </ul>
            </div>
        </div>

        <div class="section" id="section8">
            <h2><span class="step-number">8</span>Volumes (For Persistent Data)</h2>
            <p>Volumes are the preferred way to persist data generated and used by Docker containers.</p>

            <h3>Volume Commands</h3>
            <pre># Create a named volume
docker volume create n8n-data

# Run container with volume
docker run -v n8n-data:/home/node/.n8n n8n/n8n

# Bind mount (host directory)
docker run -v /host/path:/container/path myapp

# List volumes
docker volume ls

# Inspect volume
docker volume inspect n8n-data

# Remove volume
docker volume rm n8n-data</pre>

            <h3>Critical Services Using Volumes</h3>
            <ul>
                <li><strong>n8n:</strong> Workflow data and configurations</li>
                <li><strong>PostgreSQL:</strong> Database files</li>
                <li><strong>Jellyfin:</strong> Media metadata and transcoding cache</li>
                <li><strong>Ollama:</strong> Downloaded AI models (can be GBs)</li>
            </ul>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Important:</strong> Without volumes, all data is lost when container is removed. Always use volumes for databases and stateful applications.
            </div>
        </div>

        <div class="section" id="section9">
            <h2><span class="step-number">9</span>Docker Compose (Heavy Use Case)</h2>
            <p>Docker Compose is a tool for defining and running multi-container Docker applications using a YAML file.</p>

            <h3>Real Multi-Service Stack</h3>
            <p>Services currently managed with Docker Compose:</p>
            <ul>
                <li>n8n (automation workflows)</li>
                <li>Ollama (LLM server)</li>
                <li>PostgreSQL (database)</li>
                <li>Cloudflare Tunnel (secure access)</li>
                <li>Jellyfin (media server)</li>
                <li>Custom AI pipelines and tools</li>
            </ul>

            <h3>Example docker-compose.yml</h3>
            <pre>version: "3.9"

services:
  n8n:
    image: n8nio/n8n
    container_name: n8n
    ports:
      - "5678:5678"
    volumes:
      - n8n-data:/home/node/.n8n
    environment:
      - N8N_HOST=localhost
      - N8N_PORT=5678
    networks:
      - app-net
    restart: unless-stopped

  ollama:
    image: ollama/ollama
    container_name: ollama
    ports:
      - "11434:11434"
    volumes:
      - ollama-data:/root/.ollama
    networks:
      - app-net
    restart: unless-stopped

  postgres:
    image: postgres:15-alpine
    container_name: postgres
    environment:
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: secure_password
      POSTGRES_DB: appdb
    volumes:
      - postgres-data:/var/lib/postgresql/data
    networks:
      - app-net
    restart: unless-stopped

  jellyfin:
    image: jellyfin/jellyfin
    container_name: jellyfin
    ports:
      - "8096:8096"
    volumes:
      - jellyfin-config:/config
      - jellyfin-cache:/cache
      - /media:/media
    networks:
      - app-net
    restart: unless-stopped

networks:
  app-net:
    driver: bridge

volumes:
  n8n-data:
  ollama-data:
  postgres-data:
  jellyfin-config:
  jellyfin-cache:</pre>

            <h3>Compose Commands</h3>
            <pre># Start all services
docker-compose up -d

# Stop all services
docker-compose down

# View logs
docker-compose logs -f

# Restart specific service
docker-compose restart n8n

# Rebuild and restart
docker-compose up -d --build

# Scale a service
docker-compose up -d --scale worker=3</pre>
        </div>

        <div class="section" id="section10">
            <h2><span class="step-number">10</span>Docker in CI/CD (Jenkins ‚Üí Docker)</h2>
            
            <h3>Real Workflow Pipeline</h3>
            <div class="highlight-box">
                <h3>üîÑ Complete CI/CD Flow</h3>
                <pre>GitHub Push ‚Üí Webhook ‚Üí Jenkins Build ‚Üí Docker Build ‚Üí Tag ‚Üí Push to ECR ‚Üí Deploy Container</pre>
            </div>

            <h3>Jenkins Pipeline Commands</h3>
            <pre># Build with version
docker build -t app:${BUILD_NUMBER} .

# Tag for registry
docker tag app:${BUILD_NUMBER} ecr/app:${BUILD_NUMBER}

# Login to ECR
aws ecr get-login-password --region ap-south-1 | \
  docker login --username AWS --password-stdin ecr-url

# Push to registry
docker push ecr/app:${BUILD_NUMBER}

# Deploy container
docker stop app || true
docker rm app || true
docker run -d --name app -p 8085:80 ecr/app:${BUILD_NUMBER}</pre>

            <h3>Rollback Strategy</h3>
            <pre># Rollback to specific build
docker stop app
docker rm app
docker run -d --name app -p 8085:80 ecr/app:12

# Verify deployment
docker ps
curl http://localhost:8085</pre>

            <div class="success-box">
                <strong>‚úì Production Pattern:</strong> This matches real Jenkins rollback and image versioning systems used in production environments.
            </div>
        </div>

        <div class="section" id="section11">
            <h2><span class="step-number">11</span>Container Registries</h2>
            <p>Container registries store and distribute Docker images.</p>

            <h3>Popular Registries</h3>
            <table>
                <tr>
                    <th>Registry</th>
                    <th>Use Case</th>
                </tr>
                <tr>
                    <td><strong>Docker Hub</strong></td>
                    <td>Public images, free tier available</td>
                </tr>
                <tr>
                    <td><strong>AWS ECR</strong></td>
                    <td>Current production setup, private images</td>
                </tr>
                <tr>
                    <td><strong>GitHub Container Registry</strong></td>
                    <td>Integrated with GitHub Actions</td>
                </tr>
                <tr>
                    <td><strong>Harbor</strong></td>
                    <td>Self-hosted, enterprise features</td>
                </tr>
                <tr>
                    <td><strong>Google Container Registry</strong></td>
                    <td>GCP ecosystem integration</td>
                </tr>
            </table>

            <h3>Working with ECR (Current Setup)</h3>
            <pre># Create repository
aws ecr create-repository --repository-name myapp --region ap-south-1

# Login to ECR
aws ecr get-login-password --region ap-south-1 | \
  docker login --username AWS --password-stdin account-id.dkr.ecr.ap-south-1.amazonaws.com

# Tag and push
docker tag myapp:latest account-id.dkr.ecr.ap-south-1.amazonaws.com/myapp:latest
docker push account-id.dkr.ecr.ap-south-1.amazonaws.com/myapp:latest</pre>
        </div>

        <div class="section" id="section12">
            <h2><span class="step-number">12</span>Security Best Practices</h2>

            <h3>üîí Essential Security Measures</h3>
            <ul>
                <li><strong>Use .dockerignore:</strong> Exclude sensitive files from build context</li>
                <li><strong>Run as non-root user:</strong> Add <code>USER node</code> in Dockerfile</li>
                <li><strong>Scan images:</strong> Use <code>docker scan</code> or Trivy for vulnerabilities</li>
                <li><strong>Multi-stage builds:</strong> Reduce attack surface</li>
                <li><strong>Never store secrets:</strong> Use environment variables or secret management tools</li>
                <li><strong>Pin versions:</strong> Avoid <code>latest</code> tag in production</li>
                <li><strong>Limit resources:</strong> Use <code>--memory</code> and <code>--cpus</code> flags</li>
                <li><strong>Read-only filesystem:</strong> Use <code>--read-only</code> when possible</li>
            </ul>

            <h3>.dockerignore Example</h3>
            <pre>node_modules
npm-debug.log
.git
.env
*.md
.vscode
.DS_Store
dist
coverage</pre>

            <h3>Non-Root User Example</h3>
            <pre>FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .

# Create non-root user
RUN addgroup -g 1001 -S nodejs && \
    adduser -S nodejs -u 1001

# Change ownership
RUN chown -R nodejs:nodejs /app

# Switch to non-root user
USER nodejs

EXPOSE 3000
CMD ["node", "server.js"]</pre>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Security Alert:</strong> Running containers as root is a major security risk. Always use non-root users in production.
            </div>
        </div>

        <div class="section" id="section13">
            <h2><span class="step-number">13</span>Troubleshooting (Real Issues & Solutions)</h2>

            <h3>‚ùå Issue: Permission denied for Docker</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <strong>Cause:</strong> User not in docker group
                <pre>sudo usermod -aG docker jenkins
sudo usermod -aG docker $USER
sudo systemctl restart docker
# Logout and login again</pre>
            </div>

            <h3>‚ùå Issue: Container not updating after redeploy</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <strong>Common Causes:</strong>
                <ul>
                    <li>Old image cached locally - use <code>docker pull</code> before run</li>
                    <li>Rollback image not present in registry</li>
                    <li>Using <code>latest</code> tag (avoid this - use specific versions)</li>
                    <li>Container name conflict - old container still running</li>
                </ul>
                <strong>Solution:</strong>
                <pre>docker stop app || true
docker rm app || true
docker pull registry/app:${VERSION}
docker run -d --name app registry/app:${VERSION}</pre>
            </div>

            <h3>‚ùå Issue: Webhook not triggering Jenkins</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <strong>Common Causes:</strong>
                <ul>
                    <li>Used localhost instead of public endpoint</li>
                    <li>Port 8080 blocked in security group</li>
                    <li>Wrong endpoint: must be <code>/github-webhook/</code></li>
                    <li>Jenkins not reachable from GitHub IPs</li>
                </ul>
                <strong>Check:</strong> GitHub ‚Üí Webhooks ‚Üí Recent Deliveries ‚Üí Should show HTTP 200
            </div>

            <h3>‚ùå Issue: Container exits immediately</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <strong>Debug Steps:</strong>
                <pre># Check logs
docker logs container-name

# Run interactively to see errors
docker run -it myapp /bin/sh

# Check if process is running in foreground
# Background processes will cause container to exit</pre>
            </div>

            <h3>‚ùå Issue: Port already in use</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <pre># Find what's using the port
sudo lsof -i :8080
sudo netstat -tulpn | grep 8080

# Stop conflicting container
docker ps
docker stop conflicting-container

# Or use different port
docker run -p 8081:80 myapp</pre>
            </div>

            <h3>‚ùå Issue: Volume data not persisting</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <strong>Cause:</strong> Using anonymous volumes or wrong mount path
                <pre># Always use named volumes
docker volume create myapp-data
docker run -v myapp-data:/app/data myapp

# Verify volume is mounted
docker inspect container-name</pre>
            </div>

            <h3>‚ùå Issue: Out of disk space</h3>
            <div class="error-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <pre># Check disk usage
docker system df

# Clean up
docker system prune -a  # Remove unused images, containers, networks
docker volume prune     # Remove unused volumes
docker image prune -a   # Remove unused images

# Remove specific old images
docker images
docker rmi image-id</pre>
            </div>
        </div>

        <div class="section" id="section14">
            <h2><span class="step-number">14</span>VM ‚Üí Docker ‚Üí Cloud ‚Üí CI/CD Journey</h2>
            
            <h3>üöÄ Evolution of Infrastructure</h3>
            <table>
                <tr>
                    <th>Stage</th>
                    <th>What Was Done</th>
                    <th>Challenges</th>
                </tr>
                <tr>
                    <td><strong>VM Based</strong></td>
                    <td>Manual deployments, service installations, direct server management</td>
                    <td>Port conflicts, dependency hell, no version control, manual updates</td>
                </tr>
                <tr>
                    <td><strong>Docker Desktop</strong></td>
                    <td>Ran n8n, Ollama, Jellyfin, custom apps as isolated containers</td>
                    <td>Learning curve, networking complexity, data persistence</td>
                </tr>
                <tr>
                    <td><strong>Docker Compose</strong></td>
                    <td>Multi-container orchestration, networks, volumes, persistent storage</td>
                    <td>Managing multiple services, restart policies, resource limits</td>
                </tr>
                <tr>
                    <td><strong>CI/CD Pipelines</strong></td>
                    <td>Jenkins builds Docker images ‚Üí deploys automatically on push</td>
                    <td>Webhook configuration, credentials management, rollback strategy</td>
                </tr>
                <tr>
                    <td><strong>AWS Cloud</strong></td>
                    <td>EC2 Jenkins ‚Üí Docker Engine ‚Üí ECR ‚Üí automated cloud deployments</td>
                    <td>AWS permissions, ECR authentication, security groups, cost optimization</td>
                </tr>
            </table>

            <div class="highlight-box">
                <h3>üìà Key Learnings from the Journey</h3>
                <ul>
                    <li><strong>Consistency:</strong> Same Dockerfile works locally and in cloud</li>
                    <li><strong>Speed:</strong> Deployments went from hours to minutes</li>
                    <li><strong>Reliability:</strong> Automated testing and rollback capabilities</li>
                    <li><strong>Scalability:</strong> Easy to add new services or replicas</li>
                    <li><strong>Documentation:</strong> Infrastructure as code (docker-compose.yml)</li>
                </ul>
            </div>
        </div>

        <div class="section" id="section15">
            <h2><span class="step-number">15</span>Enterprise Comparison</h2>
            <p>Understanding the difference between learning/personal setups and enterprise production systems:</p>

            <table>
                <tr>
                    <th>Current Setup (Personal/Learning)</th>
                    <th>Enterprise Production Setup</th>
                </tr>
                <tr>
                    <td>Docker Desktop on local machine</td>
                    <td>Kubernetes (EKS, AKS, GKE) with multiple nodes</td>
                </tr>
                <tr>
                    <td>Jenkins ‚Üí Docker CI/CD</td>
                    <td>GitHub Actions, GitLab CI, ArgoCD, Spinnaker</td>
                </tr>
                <tr>
                    <td>Docker Compose for orchestration</td>
                    <td>Kubernetes + Helm charts + operators</td>
                </tr>
                <tr>
                    <td>Manual rollback using image tags</td>
                    <td>Automated blue-green + canary deployments</td>
                </tr>
                <tr>
                    <td>Cloudflare Tunnel for routing</td>
                    <td>Kubernetes Ingress controllers, AWS ALB, API gateways</td>
                </tr>
                <tr>
                    <td>Single EC2 instance</td>
                    <td>Auto-scaling groups, load balancers, multi-region</td>
                </tr>
                <tr>
                    <td>Basic monitoring with <code>docker stats</code></td>
                    <td>Prometheus, Grafana, ELK stack, Datadog, New Relic</td>
                </tr>
                <tr>
                    <td>Manual secrets in environment files</td>
                    <td>AWS Secrets Manager, HashiCorp Vault, encrypted etcd</td>
                </tr>
                <tr>
                    <td>No automated testing</td>
                    <td>Unit, integration, E2E tests, security scans in pipeline</td>
                </tr>
                <tr>
                    <td>Direct SSH access</td>
                    <td>AWS Systems Manager, bastion hosts, zero-trust networks</td>
                </tr>
                <tr>
                    <td>Local volume storage</td>
                    <td>AWS EBS, EFS, S3, distributed storage systems</td>
                </tr>
                <tr>
                    <td>Single database container</td>
                    <td>RDS with multi-AZ, read replicas, automated backups</td>
                </tr>
            </table>

            <div class="success-box">
                <strong>‚úì Important Note:</strong> Your current setup follows real enterprise principles while staying within free-tier/personal constraints. It's an excellent foundation for understanding production workflows.
            </div>

            <h3>üéØ Next Steps Toward Production-Ready Systems</h3>
            <ol>
                <li><strong>Container Orchestration:</strong> Learn Kubernetes basics, deploy to minikube or EKS</li>
                <li><strong>Monitoring & Observability:</strong> Implement Prometheus + Grafana stack</li>
                <li><strong>Security Hardening:</strong> Image scanning, secret management, network policies</li>
                <li><strong>High Availability:</strong> Multi-node clusters, load balancing, health checks</li>
                <li><strong>GitOps:</strong> Infrastructure as code with Terraform, ArgoCD for deployments</li>
                <li><strong>Automated Testing:</strong> Add unit tests, integration tests to CI pipeline</li>
                <li><strong>Disaster Recovery:</strong> Backup strategies, automated restore procedures</li>
                <li><strong>Cost Optimization:</strong> Resource limits, auto-scaling, spot instances</li>
            </ol>
        </div>

        <div class="section">
            <h2>üéì Conclusion</h2>
            <p>This comprehensive Docker guide covers everything from basic concepts to production CI/CD workflows, based on real hands-on experience with:</p>
            <ul>
                <li>Running multiple production services (n8n, Ollama, Jellyfin, PostgreSQL)</li>
                <li>Building and maintaining Jenkins ‚Üí Docker pipelines</li>
                <li>Managing infrastructure from local development to AWS cloud</li>
                <li>Implementing rollback strategies and version control</li>
                <li>Troubleshooting real-world issues and finding solutions</li>
            </ul>

            <div class="highlight-box">
                <h3>üöÄ Key Takeaways</h3>
                <ul>
                    <li>Docker provides consistency across all environments</li>
                    <li>Containerization is essential for modern DevOps practices</li>
                    <li>Docker Compose simplifies multi-service applications</li>
                    <li>CI/CD with Docker enables rapid, reliable deployments</li>
                    <li>Security and best practices are critical from day one</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>üìö Additional Resources</h2>
            <ul>
                <li><a href="https://docs.docker.com/" target="_blank">Docker Official Documentation</a></li>
                <li><a href="https://docs.docker.com/compose/" target="_blank">Docker Compose Documentation</a></li>
                <li><a href="https://hub.docker.com/" target="_blank">Docker Hub - Public Images</a></li>
                <li><a href="https://docs.aws.amazon.com/ecr/" target="_blank">AWS ECR Documentation</a></li>
                <li><a href="https://kubernetes.io/docs/home/" target="_blank">Kubernetes Documentation (Next Step)</a></li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 60px; padding: 40px 0; border-top: 2px solid #e0e0e0;">
            <a href="/index.html" class="back-btn" style="font-size: 1.1em;">‚Üê Back to Portfolio</a>
        </div>
    </div>
</body>
</html>